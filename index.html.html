<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offline Lesson Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --accent: #e74c3c;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --gray: #7f8c8d;
            --border: #ddd;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(120deg, var(--primary) 0%, #2980b9 100%);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }
        
        .offline-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
        }
        
        .offline-badge i {
            margin-right: 5px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }
        
        .logo i {
            font-size: 32px;
            margin-right: 15px;
            background: white;
            color: var(--primary);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .storage-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 14px;
        }
        
        .content-area {
            padding: 25px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .btn {
            padding: 12px 20px;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn i {
            margin-right: 8px;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background: var(--primary);
        }
        
        .btn-secondary {
            background: var(--secondary);
        }
        
        .btn-accent {
            background: var(--accent);
        }
        
        .btn-pdf {
            background: #e74c3c;
        }
        
        .form-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
        }
        
        .data-table th, .data-table td {
            padding: 16px 20px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        
        .data-table th {
            background-color: var(--primary);
            color: white;
            font-weight: 600;
        }
        
        .data-table tr:last-child td {
            border-bottom: none;
        }
        
        .data-table tr:hover {
            background-color: #f5f7fa;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: var(--gray);
            font-size: 14px;
            padding: 20px;
            border-top: 1px solid var(--border);
        }
        
        .save-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 12px 18px;
            background-color: var(--secondary);
            color: white;
            border-radius: 6px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            align-items: center;
            z-index: 1000;
        }
        
        .save-indicator i {
            margin-right: 8px;
        }
        
        .save-indicator.show {
            opacity: 1;
        }
        
        .filter-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-controls select {
            padding: 10px 15px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 16px;
        }
        
        .storage-status {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid var(--primary);
        }
        
        /* Print styles */
        @media print {
            body {
                background: white;
                padding: 0;
            }
            
            .container {
                box-shadow: none;
                border-radius: 0;
            }
            
            header {
                background: white !important;
                color: black !important;
                padding: 20px;
                border-bottom: 2px solid var(--primary);
            }
            
            .offline-badge {
                display: none;
            }
            
            .logo i {
                background: var(--primary) !important;
                color: white !important;
            }
            
            .content-area {
                padding: 15px;
            }
            
            .form-grid, .form-actions, .footer, .filter-controls, .storage-status {
                display: none;
            }
            
            .data-table {
                box-shadow: none;
                page-break-inside: avoid;
            }
            
            .data-table th {
                background-color: white !important;
                color: black !important;
                border-bottom: 2px solid black;
            }
            
            .print-header {
                text-align: center;
                margin-bottom: 20px;
            }
            
            .print-title {
                font-size: 24px;
                margin-bottom: 10px;
                color: var(--dark);
            }
            
            .print-subtitle {
                font-size: 16px;
                color: var(--gray);
                margin-bottom: 20px;
            }
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-actions, .filter-controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                margin-right: 0;
            }
            
            .data-table {
                display: block;
                overflow-x: auto;
            }
            
            .offline-badge {
                position: relative;
                top: 0;
                right: 0;
                margin: 10px auto;
                width: fit-content;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="offline-badge">
                <i class="fas fa-wifi-slash"></i> Works Offline
            </div>
            <div class="logo">
                <i class="fas fa-book-open"></i>
                <div>
                    <h1>Offline Lesson Tracker</h1>
                    <p class="subtitle">All data stored locally in your browser - no internet needed</p>
                </div>
            </div>
            <div class="storage-info">
                <i class="fas fa-database"></i> All data is saved automatically to your browser's storage
            </div>
        </header>
        
        <div class="content-area">
            <form id="lesson-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="subject">Subject</label>
                        <select class="form-control" id="subject" required>
                            <option value="">Select a subject</option>
                            <option value="english">English</option>
                            <option value="math">Math</option>
                            <option value="science">Science</option>
                            <option value="filipino">Filipino</option>
                            <option value="ap">Araling Panlipunan</option>
                            <option value="epp">EPP</option>
                            <option value="gmrc">GMRC</option>
                            <option value="mapeh">MAPEH</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="week">Week</label>
                        <select class="form-control" id="week" required>
                            <option value="">Select a week</option>
                            <option value="1">Week 1</option>
                            <option value="2">Week 2</option>
                            <option value="3">Week 3</option>
                            <option value="4">Week 4</option>
                            <option value="5">Week 5</option>
                            <option value="6">Week 6</option>
                            <option value="7">Week 7</option>
                            <option value="8">Week 8</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="day">Day</label>
                        <select class="form-control" id="day" required>
                            <option value="">Select a day</option>
                            <option value="1">Day 1</option>
                            <option value="2">Day 2</option>
                            <option value="3">Day 3</option>
                            <option value="4">Day 4</option>
                            <option value="5">Day 5</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="topic">Topic Name</label>
                    <input type="text" class="form-control" id="topic" placeholder="Enter topic name" required>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Lesson
                    </button>
                    <button type="button" class="btn btn-secondary" id="print-btn">
                        <i class="fas fa-print"></i> Print Table
                    </button>
                    <button type="button" class="btn btn-pdf" id="pdf-btn">
                        <i class="fas fa-file-pdf"></i> Export as PDF
                    </button>
                    <button type="button" class="btn btn-accent" id="reset-btn">
                        <i class="fas fa-trash"></i> Clear All
                    </button>
                </div>
            </form>
            
            <div class="filter-controls">
                <select id="filter-subject">
                    <option value="all">All Subjects</option>
                    <option value="english">English</option>
                    <option value="math">Math</option>
                    <option value="science">Science</option>
                    <option value="filipino">Filipino</option>
                </select>
                
                <select id="filter-week">
                    <option value="all">All Weeks</option>
                    <option value="1">Week 1</option>
                    <option value="2">Week 2</option>
                    <option value="3">Week 3</option>
                    <option value="4">Week 4</option>
                </select>
                
                <button class="btn btn-primary" id="apply-filters">
                    <i class="fas fa-filter"></i> Apply Filters
                </button>
            </div>
            
            <div class="print-header">
                <h2 class="print-title">Lesson Tracker</h2>
                <p class="print-subtitle">All subjects and their lesson progress</p>
            </div>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Subject</th>
                        <th>Week</th>
                        <th>Day</th>
                        <th>Topic Name</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="lesson-data">
                    <!-- Data will be populated here -->
                </tbody>
            </table>
            
            <div class="storage-status">
                <h3><i class="fas fa-info-circle"></i> Local Storage Information</h3>
                <p>All your data is stored locally in your browser using localStorage. This means:</p>
                <ul>
                    <li>No internet connection is required to use this application</li>
                    <li>Your data remains private and is not sent to any server</li>
                    <li>Your data will persist even if you close the browser</li>
                    <li>To transfer data to another device, use the Export/Import features</li>
                </ul>
            </div>
        </div>
        
        <div class="footer">
            <p>Offline Lesson Tracker &copy; 2023 | All data stored locally in your browser - no internet required</p>
        </div>
        
        <div class="save-indicator" id="save-indicator">
            <i class="fas fa-check-circle"></i> Data Saved Locally
        </div>
    </div>

    <script>
        // Initialize jsPDF
        window.jsPDF = window.jspdf.jsPDF;
        
        document.addEventListener('DOMContentLoaded', function() {
            const lessonForm = document.getElementById('lesson-form');
            const lessonData = document.getElementById('lesson-data');
            const printBtn = document.getElementById('print-btn');
            const pdfBtn = document.getElementById('pdf-btn');
            const resetBtn = document.getElementById('reset-btn');
            const saveIndicator = document.getElementById('save-indicator');
            const filterSubject = document.getElementById('filter-subject');
            const filterWeek = document.getElementById('filter-week');
            const applyFilters = document.getElementById('apply-filters');
            
            let lessons = [];
            
            // Load data from localStorage
            function loadData() {
                const savedData = localStorage.getItem('lessonData');
                if (savedData) {
                    lessons = JSON.parse(savedData);
                    renderTable();
                } else {
                    showEmptyState();
                }
            }
            
            // Show empty state
            function showEmptyState() {
                lessonData.innerHTML = `
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 30px; color: var(--gray);">
                            <i class="fas fa-inbox" style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></i>
                            <h3>No lessons added yet</h3>
                            <p>Start by adding a lesson using the form above.</p>
                        </td>
                    </tr>
                `;
            }
            
            // Save data to localStorage
            function saveData() {
                localStorage.setItem('lessonData', JSON.stringify(lessons));
                
                // Show save indicator
                saveIndicator.classList.add('show');
                setTimeout(() => {
                    saveIndicator.classList.remove('show');
                }, 2000);
            }
            
            // Render table with lesson data
            function renderTable() {
                lessonData.innerHTML = '';
                
                if (lessons.length === 0) {
                    showEmptyState();
                    return;
                }
                
                // Apply filters
                const subjectFilter = filterSubject.value;
                const weekFilter = filterWeek.value;
                
                let filteredLessons = lessons;
                
                if (subjectFilter !== 'all') {
                    filteredLessons = filteredLessons.filter(lesson => lesson.subject === subjectFilter);
                }
                
                if (weekFilter !== 'all') {
                    filteredLessons = filteredLessons.filter(lesson => lesson.week === weekFilter);
                }
                
                if (filteredLessons.length === 0) {
                    lessonData.innerHTML = `
                        <tr>
                            <td colspan="5" style="text-align: center; padding: 20px; color: var(--gray);">
                                No lessons match the current filters. Try changing your filter settings.
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                filteredLessons.forEach((lesson, index) => {
                    const row = document.createElement('tr');
                    
                    // Format subject name
                    const subjectMap = {
                        'english': 'English',
                        'math': 'Math',
                        'science': 'Science',
                        'filipino': 'Filipino',
                        'ap': 'Araling Panlipunan',
                        'epp': 'EPP',
                        'gmrc': 'GMRC',
                        'mapeh': 'MAPEH'
                    };
                    
                    row.innerHTML = `
                        <td>${subjectMap[lesson.subject]}</td>
                        <td>Week ${lesson.week}</td>
                        <td>Day ${lesson.day}</td>
                        <td>${lesson.topic}</td>
                        <td>
                            <button class="btn btn-accent" style="padding: 5px 10px; font-size: 14px;" onclick="deleteLesson(${index})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    `;
                    
                    lessonData.appendChild(row);
                });
            }
            
            // Delete a lesson
            window.deleteLesson = function(index) {
                if (confirm('Are you sure you want to delete this lesson?')) {
                    lessons.splice(index, 1);
                    saveData();
                    renderTable();
                }
            };
            
            // Handle form submission
            lessonForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const subject = document.getElementById('subject').value;
                const week = document.getElementById('week').value;
                const day = document.getElementById('day').value;
                const topic = document.getElementById('topic').value;
                
                // Add new lesson
                lessons.push({
                    subject,
                    week,
                    day,
                    topic
                });
                
                // Save and render
                saveData();
                renderTable();
                
                // Reset form
                lessonForm.reset();
            });
            
            // Handle print button
            printBtn.addEventListener('click', function() {
                window.print();
            });
            
            // Handle PDF export button
            pdfBtn.addEventListener('click', function() {
                // Create a new jsPDF instance
                const doc = new jsPDF();
                
                // Add title
                doc.setFontSize(20);
                doc.text('Lesson Tracker', 14, 15);
                doc.setFontSize(12);
                doc.setTextColor(100);
                doc.text('All subjects and their lesson progress', 14, 22);
                
                // Get filtered data for PDF
                const subjectFilter = filterSubject.value;
                const weekFilter = filterWeek.value;
                
                let filteredLessons = lessons;
                
                if (subjectFilter !== 'all') {
                    filteredLessons = filteredLessons.filter(lesson => lesson.subject === subjectFilter);
                }
                
                if (weekFilter !== 'all') {
                    filteredLessons = filteredLessons.filter(lesson => lesson.week === weekFilter);
                }
                
                // Format data for PDF table
                const tableColumn = ["Subject", "Week", "Day", "Topic Name"];
                const tableRows = [];
                
                // Format subject names for PDF
                const subjectMap = {
                    'english': 'English',
                    'math': 'Math',
                    'science': 'Science',
                    'filipino': 'Filipino',
                    'ap': 'Araling Panlipunan',
                    'epp': 'EPP',
                    'gmrc': 'GMRC',
                    'mapeh': 'MAPEH'
                };
                
                filteredLessons.forEach(lesson => {
                    const lessonData = [
                        subjectMap[lesson.subject],
                        `Week ${lesson.week}`,
                        `Day ${lesson.day}`,
                        lesson.topic
                    ];
                    tableRows.push(lessonData);
                });
                
                // Add table to PDF
                doc.autoTable({
                    head: [tableColumn],
                    body: tableRows,
                    startY: 30,
                    theme: 'grid',
                    styles: {
                        fontSize: 10,
                        cellPadding: 3,
                    },
                    headStyles: {
                        fillColor: [52, 152, 219],
                        textColor: 255,
                        fontStyle: 'bold'
                    },
                    alternateRowStyles: {
                        fillColor: [240, 240, 240]
                    }
                });
                
                // Save the PDF
                const date = new Date();
                const dateString = `${date.getFullYear()}-${date.getMonth()+1}-${date.getDate()}`;
                doc.save(`lesson-tracker-${dateString}.pdf`);
            });
            
            // Handle reset button
            resetBtn.addEventListener('click', function() {
                if (confirm('Are you sure you want to clear all lesson data? This cannot be undone.')) {
                    lessons = [];
                    saveData();
                    renderTable();
                }
            });
            
            // Handle filter application
            applyFilters.addEventListener('click', function() {
                renderTable();
            });
            
            // Initialize the app
            loadData();
        });
    </script>
</body>
</html>
